<div *ngIf="cargando" id="loading" class="row" style="padding-top: 20px;">
    <div class="col-sm-12">
        <div class="text-center">
            <span class="font-weight-bold">Cargando Datos</span>
            <br><br>
            <i class="fa fa-spinner fa-spin fa-3x text-themecolor"></i>
            <br><br>
            <span>Por favor espere un momento...</span>
        </div>
    </div>
</div>

<div *ngIf="!cargando">
    <div class="row" id="formEditable">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Empezar con la Auditoria</h4>
                    <h6 class="card-subtitle">Plan: {{ planV }}</h6>
                    <!-- <h6 class="card-subtitle">IdP: {{ idPlan }}</h6>
                    <h6 class="card-subtitle">IdA: {{ idAuditoria }}</h6>
                    <h6 class="card-subtitle">Progreso: {{ progresoAudi }}</h6> -->
                    <form ngNativeValidate [formGroup]="formaEditar" (ngSubmit)="agregarAuditoria()" class="floating-labels m-t-40">
                        <div class="form-group m-b-40">
                            <input type="text" class="form-control" formControlName="nombre" name="nombre" id="nombre" required>
                            <span class="bar"></span>
                            <label for="nombre">Nombre de la Auditoría</label>
                        </div>
                        <div class="form-group m-b-40">
                            <h5 class="m-t-20">Normas</h5>
                            <select class="select2 m-b-10 select2-multiple" formControlName="normas" name="normas" id="normas" style="width: 100%" multiple="multiple" data-placeholder="Elige" required>
                            <option *ngFor="let norma of normas" value="{{ norma._id }}"> {{ norma.nombreNorma }} </option>
                        </select>
                            <span class="help-block text-themecolor"><small>Puedes seleccionar varias Normas.</small></span>
                        </div>
                        <div class="form-group m-b-40">
                            <input class="form-control input-daterange-datepicker" formControlName="fechas" name="fechas" id="fechas" type="text" required>
                            <span class="bar"></span>
                            <label for="fechas">Fecha Inicial - Fecha Final</label>
                        </div>
                        <div class="form-group m-b-40">
                            <h5 class="m-t-20">Grupo Auditor</h5>
                            <select class="select2 m-b-10 select2-multiple" formControlName="auditores" name="auditores" id="auditores" style="width: 100%" multiple="multiple" data-placeholder="Elige" required>
                            <option *ngFor="let auditor of auditores" value="{{ auditor._id }}"> {{ auditor.nombre + ' ' + auditor.primer_Apellido + ' ' + (auditor.segundo_Apellido || '') }} </option>
                        </select>
                            <span class="help-block text-themecolor"><small>Puedes seleccionar varios Auditores.</small></span>
                        </div>
                        <div class="form-group m-b-40">
                            <textarea class="form-control" rows="4" formControlName="objetivos" name="objetivos" id="objetivos" required></textarea>
                            <span class="bar"></span>
                            <label for="objetivos">Objetivos</label>
                            <span class="help-block text-themecolor"><small>Ejemplo: Determinar el grado de conformidad con la norma ISO 9001:2015, etc.</small></span>
                        </div>
                        <div class="form-group m-b-40">
                            <textarea class="form-control" rows="4" formControlName="alcance" name="alcance" id="alcance" required></textarea>
                            <span class="bar"></span>
                            <label for="alcance">Alcance</label>
                            <span class="help-block text-themecolor"><small>Alcance propuesto por el equipo auditor.</small></span>
                        </div>
                        <div class="form-group m-b-40">
                            <input type="text" class="form-control" formControlName="contacto" name="contacto" id="contacto" required>
                            <span class="bar"></span>
                            <label for="contacto">Contacto</label>
                            <span class="help-block text-themecolor"><small>Anotar el nombre de la persona con quien se tendrá contacto durante la auditoría.</small></span>
                        </div>

                        <div class="modal-footer">
                            <button *ngIf="progresoAudi === 'empezar'" type="submit" class="btn btn-themecolor waves-effect">Empezar</button>
                            <button *ngIf="progresoAudi === 'encurso'" type="submit" class="btn btn-themecolor waves-effect">Editar</button>
                            <!-- <button type="submit" class="btn btn-themecolor waves-effect">Editar</button> -->
                            <!-- <button (click)="imprimirMultiSelect()" type="button" class="btn btn-default waves-effect">Cancelar</button> -->
                            <button routerLink="/planes" type="button" class="btn btn-default waves-effect">Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>